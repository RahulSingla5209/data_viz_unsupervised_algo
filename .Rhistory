df[is.na(df)] <- 0
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point() +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.5) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month)) + scale_color_brewer(palette="Dark2")
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month)) + scale_color_brewer(palette="Dark2")
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month)) + scale_color_brewer()
?scale_color_continuous
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month)) + scale_fill_continuous(type = "viridis")
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month)) + scale_fill_continuous(type = "gradient")
View(df)
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay)
df[is.na(df)] <- 0
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.2) +
facet_wrap(vars(Month)) + scale_fill_continuous(type = "gradient")
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha) +
facet_wrap(vars(Month)) + scale_fill_continuous(type = "gradient")
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month)) + scale_fill_continuous(type = "gradient")
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, color = unavoidable_delays_perc)) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, shape = unavoidable_delays_perc)) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, fill = unavoidable_delays_perc)) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month))
hist(df$unavoidable_delays_perc)
hist(df$unavoidable_delays_perc, xlim = (0,40))
hist(df$unavoidable_delays_perc, xlim = c(0,40))
hist(df$unavoidable_delays_perc, xlim = c(0,40), breaks = 30)
hist(df$unavoidable_delays_perc, xlim = c(0,40), breaks = 100)
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, fill = unavoidable_delays_perc)) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, shape = unavoidable_delays_perc)) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, shape = as.factor(unavoidable_delays_perc))) +
geom_point(alpha = 0.02) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay, shape = as.factor(unavoidable_delays_perc))) +
geom_point(alpha = 1) +
facet_wrap(vars(Month))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
fill = as.factor(unavoidable_delays_perc)),
df %>% ggplot(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
fill = as.factor(unavoidable_delays_perc))
df %>% ggplot(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
color = as.factor(unavoidable_delays_perc))) +
df %>% ggplot(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
color = as.factor(unavoidable_delays_perc)) +
geom_point(alpha = 0.5) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df %>% ggplot(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
color = (unavoidable_delays_perc)) +
geom_point(alpha = 0.5) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df %>% ggplot(aes(x=ArrDelay, y = DepDelay,
shape = (unavoidable_delays_perc)),
color = (unavoidable_delays_perc)) +
geom_point(alpha = 0.5) +
facet_wrap(vars(Month))
length(unique(df$unavoidable_delays_perc))
(unique(df$unavoidable_delays_perc))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df %>% ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
color = as.factor(unavoidable_delays_perc),alpha = 0.5) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df %>% ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
color = as.factor(unavoidable_delays_perc),alpha = 0.5) +
facet_wrap(vars(Month))
df$unavoidable_delays_perc
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc)),
color = as.factor(unavoidable_delays_perc),alpha = 0.5) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),alpha = 0.5) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),alpha = 0.75) +
facet_wrap(vars(Month)) + theme_bw()
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),alpha = 0.65) +
facet_wrap(vars(Month)) + theme_classic()
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),alpha = 0.65) +
facet_wrap(vars(Month)) + theme_light()
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=1.25,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=0.25,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=0.75,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=1.75,alpha = 0.35) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=0.95,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
fill = as.factor(unavoidable_delays_perc)),size=0.95,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
ggplot() +
geom_point(data = df, aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=0.95,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=0.95,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=2.95,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=6.95,alpha = 0.65) +
facet_wrap(vars(Month))
rm(list = ls())
df = data.table::fread('ABIA.csv')
df = df[df$Cancelled == 0,]
df[is.na(df)] <- 0
df$unavoidable_delays = df$WeatherDelay + df$NASDelay + df$SecurityDelay
#df$unavoidable_delays_perc = df$unavoidable_delays / df$DepDelay
df$unavoidable_delays_perc = abs(df$unavoidable_delays / df$DepDelay) > 0
df[is.na(df)] <- 0
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),size=6.95,alpha = 0.065) +
facet_wrap(vars(Month))
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),
size=2,
alpha = 0.065) +
facet_wrap(vars(Month))
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),
size=2,
alpha = 0.65) +
facet_wrap(vars(Month))
df%>%ggplot() +
geom_point(aes(x=ArrDelay, y = DepDelay,
shape = as.factor(unavoidable_delays_perc),
color = as.factor(unavoidable_delays_perc)),
size=2,
alpha = 0.5) +
facet_wrap(vars(Month))
df %>%
median(df[df$green_rating  == 1,]$scaled_rent) -
median(df[df$green_rating  == 0,]$scaled_rent)
rm(list = ls())
library(DescTools)
library(tidyverse)
df = read.csv('greenbuildings.csv', header = T)
df$green_rating = as.factor(df$green_rating)
df$scaled_rent = df$Rent / df$cluster_rent
#scaled
difference_in_rents =
median(df[df$green_rating  == 1,]$scaled_rent) -
median(df[df$green_rating  == 0,]$scaled_rent)
df %>%
median(df[df$green_rating  == 1,]$scaled_rent) -
median(df[df$green_rating  == 0,]$scaled_rent)
df1 = df[df$class_a == 1,]
median(df1[df1$green_rating  == 1,]$scaled_rent) - median(df1[df1$green_rating  == 0,]$scaled_rent)
difference_in_rents
df2 = df[df$amenities == 1,]
median(df2[df2$green_rating  == 1,]$scaled_rent) - median(df2[df2$green_rating  == 0,]$scaled_rent)
df1 = df[df$class_a == 1,]
median(df1[df1$green_rating  == 1,]$scaled_rent) - median(df1[df1$green_rating  == 0,]$scaled_rent)
difference_in_rents
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(DescTools)
library(tidyverse)
df = read.csv('greenbuildings.csv', header = T)
df$green_rating = as.factor(df$green_rating)
df$scaled_rent = df$Rent / df$cluster_rent
#scaled
difference_in_rents =
median(df[df$green_rating  == 1,]$scaled_rent) -
median(df[df$green_rating  == 0,]$scaled_rent)
additional_rent_pre_sqft = 25 * (difference_in_rents + 1) #assuming $25 to be base
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
df1 = df[df$class_a == 1,]
difference_in_rents = median(df1[df1$green_rating  == 1,]$scaled_rent) - median(df1[df1$green_rating  == 0,]$scaled_rent)
difference_in_rents
additional_pay_from_green
df1 = df[df$class_a == 1,]
difference_in_rents = median(df1[df1$green_rating  == 1,]$scaled_rent) - median(df1[df1$green_rating  == 0,]$scaled_rent)
additional_rent_pre_sqft = 25 * (difference_in_rents + 1) #assuming $25 to be base
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
additional_pay_from_green
df2 = df[df$amenities == 1,]
difference_in_rents = median(df2[df2$green_rating  == 1,]$scaled_rent) - median(df2[df2$green_rating  == 0,]$scaled_rent)
additional_rent_pre_sqft = 25 * (difference_in_rents + 1) #assuming $25 to be base
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
additional_pay_from_green
additional_pay_from_green
df %>% ggplot(aes(x = stories, y = Rent)) +
geom_point() +
geom_vline(xintercept = 15) +
stat_smooth(method = "lm", col = "red", formula = 'y ~ x') +
facet_wrap(vars(green_rating)) + xlim(0, 60)
df %>% ggplot(aes(x = size, y = Rent, color = class_a)) +
geom_point() +
geom_vline(xintercept = 250000) +
stat_smooth(method = "lm", col = "red", formula = 'y ~ x') +
facet_wrap(vars(green_rating)) + scale_x_log10() + ylim(0, 100)
df$class_a = as.factor(df$class_a)
df %>% ggplot(aes(x = Rent, color = green_rating)) +
geom_histogram() +  facet_wrap(vars(class_a), nrow = 2) +
xlim(0, 100) +
labs(title = "Facet wrap - Class A")
df %>% ggplot(aes(x = Rent, color = green_rating)) +
geom_histogram() +
facet_wrap(vars(amenities), nrow = 2) +
xlim(0, 100) +
labs(title = "Facet wrap - Amenties")
#df %>% ggplot(aes(x = stories, y = Rent)) +
#  geom_point() +
#  geom_vline(xintercept = 15) +
#  stat_smooth(method = "lm", col = "red", formula = 'y ~ x') +
#  facet_wrap(vars(green_rating)) + xlim(0, 60)
#
#df %>% ggplot(aes(x = size, y = Rent, color = class_a)) +
#  geom_point() +
#  geom_vline(xintercept = 250000) +
#  stat_smooth(method = "lm", col = "red", formula = 'y ~ x') +
#  facet_wrap(vars(green_rating)) + scale_x_log10() + ylim(0, 100)
df$class_a = as.factor(df$class_a)
df %>% ggplot(aes(x = Rent, color = green_rating)) +
geom_histogram() +  facet_wrap(vars(class_a), nrow = 2) +
xlim(0, 100) +
labs(title = "Facet wrap - Class A")
df %>% ggplot(aes(x = Rent, color = green_rating)) +
geom_histogram() +
facet_wrap(vars(amenities), nrow = 2) +
xlim(0, 100) +
labs(title = "Facet wrap - Amenties")
df3 = df[df$amenities == 1 & df$class_a == 1,]
difference_in_rents = median(df3[df3$green_rating  == 1,]$scaled_rent) - median(df3[df3$green_rating  == 0,]$scaled_rent)
additional_rent_pre_sqft = 25 * (difference_in_rents + 1) #assuming $25 to be base
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
additional_pay_from_green
median(df3[df3$green_rating  == 1,]$Rent) - median(df3[df3$green_rating  == 0,]$Rent)
median(df3[df3$green_rating  == 0,]$Rent
median(df3[df3$green_rating  == 0,]$Rent)
median(df3[df3$green_rating  == 1,]$Rent)
0.47 * area
median(df1[df1$green_rating  == 1,]$Rent)
median(df1[df1$green_rating  == 0,]$Rent)
df1 = df[df$class_a == 1,]
additional_rent_pre_sqft = median(df1[df1$green_rating  == 1,]$Rent) - median(df1[df1$green_rating  == 0,]$Rent)
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
additional_pay_from_green
df2 = df[df$amenities == 1,]
additional_rent_pre_sqft = median(df2[df2$green_rating  == 1,]$Rent) - median(df2[df2$green_rating  == 0,]$Rent)
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
additional_pay_from_green
df2 = df[df$amenities == 1,]
additional_rent_pre_sqft = median(df2[df2$green_rating  == 1,]$Rent) - median(df2[df2$green_rating  == 0,]$Rent)
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
df3 = df[df$amenities == 1 & df$class_a == 1,]
additional_rent_pre_sqft = median(df3[df3$green_rating  == 1,]$Rent) - median(df3[df3$green_rating  == 0,]$Rent)
area = 250000 #sqft
additional_pay_from_green = additional_rent_pre_sqft * area
additional_pay_from_green
